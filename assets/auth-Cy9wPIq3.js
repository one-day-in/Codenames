import{s as e}from"./url-oOUZ7you.js";async function s(){const{data:{user:t}}=await e.auth.getUser();return t}async function c(){const{error:t}=await e.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+window.location.pathname}});t&&console.error("Auth error:",t)}async function u(){await e.auth.signOut()}async function g(t){const{data:o}=await e.from("rooms").select("id, guest_token, state").eq("owner_id",t).maybeSingle();if(o)return{id:o.id,guest_token:o.guest_token,hasActiveGame:!!o.state};const i=a(),{data:n}=await e.from("rooms").insert({id:i,owner_id:t}).select("id, guest_token").single();return{id:n.id,guest_token:n.guest_token,hasActiveGame:!1}}function a(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().slice(0,8):Math.random().toString(36).slice(2,10)}export{g as a,u as b,s as g,c as s};
