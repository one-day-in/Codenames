import{s as f}from"./i18n-BSQgICzt.js";function c(n){const t=[...n];for(let o=t.length-1;o>0;o--){const r=Math.floor(Math.random()*(o+1));[t[o],t[r]]=[t[r],t[o]]}return t}function d(n,t){if(t>n.length)throw new Error(`Cannot pick ${t} from array of ${n.length}`);return c(n).slice(0,t)}function m(n){const t=n*n,o=Math.random()<.5?"resonant":"dissonant",r=Math.ceil(t/3),e=r-1,s=o==="resonant"?r:e,a=o==="dissonant"?r:e,l=1,i=t-s-a-l,u=[...Array(s).fill("resonant"),...Array(a).fill("dissonant"),...Array(i).fill("anomaly"),...Array(l).fill("nightmare")];return{roles:c(u),startsFirst:o}}const h=7;async function g(n="uk"){const{data:t,error:o}=await f.from("words").select("word").eq("language",n).eq("active",!0);if(o||!t||t.length<25)throw new Error(`Cannot load words (language: ${n})`);return t.map(r=>r.word)}function y({size:n,words:t}){const{roles:o,startsFirst:r}=m(n);return{cells:d(t,n*n).map((s,a)=>({word:s,role:o[a],anomalyVariant:o[a]==="anomaly"?Math.ceil(Math.random()*h):null,revealed:!1})),startsFirst:r}}export{y as createBoard,g as loadWords};
