(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();function a(){const s=new Set;return{subscribe(r){return s.add(r),()=>s.delete(r)},emit(r){s.forEach(o=>{try{o(r)}catch(c){console.error("Listener error:",c)}})},clear(){s.clear()}}}function i(){const s="codenames-game-state",r=a();let o=null;try{const e=localStorage.getItem(s);e&&(o=JSON.parse(e))}catch(e){console.warn("Failed to load state from localStorage",e)}function c(e){o=e;try{localStorage.setItem(s,JSON.stringify(o))}catch(t){console.warn("Failed to save state to localStorage",t)}r.emit(o)}return window.addEventListener("storage",e=>{if(e.key===s&&e.newValue)try{o=JSON.parse(e.newValue),r.emit(o)}catch(t){console.warn("Failed to parse state from storage event",t)}}),{getState:()=>o?{...o}:null,setState:c,subscribe:r.subscribe}}export{a,i as c};
